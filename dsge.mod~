/* 2 Country RBC */
%----------------------------------------------------------------
% 0. Housekeeping (close all graphic windows)
%----------------------------------------------------------------
close all;

%----------------------------------------------------------------
% 1. Defining variables
%----------------------------------------------------------------

var c c_f s s_f p b R g d d_f;
varexo e_s e_sf e_b;
 
parameters beta rho rho_f phi_s phi_sf alpha_b  alpha_sh alpha_sf;

%----------------------------------------------------------------
% 2. Calibration   
%----------------------------------------------------------------


beta       = 0.9975;   

rho      = 0.9;
rho_f     = 0.85;

phi_s     = 0.1;
phi_sf     = 0.2;

alpha_b    = 0.8;
alpha_sh   = 0.8;
alpha_sf   = 0.8;


%----------------------------------------------------------------
% 3. Model
%----------------------------------------------------------------

model(linear);    
%Home agent FOCs: 
    p      =beta*((c/c(+1))^rho) * (p(+1)+d(+1)) - phi_s*s;
%Foreign agent FOCs:
    p      =beta*((c_f/c_f(+1))^rho_f) * (p(+1)+d(+1)) - phi_sf*s_f;
    R      =beta*((c_f/c_f(+1))^rho_f)
%Foreign Government:
    b      =(1-alpha_b)+alpha_b*b(-1)+e_b-1;
    g      =R*b-b(-1);
%Firms:
    s_f+  =sh-1;
    dh      =(1-alpha_sh)+alpha_sh+alpha_sh*dh(-1)+e_sh-1;
    df      =(1-alpha_sf)+alpha_sf+alpha_sf*df(-1)+e_sf-1;
%Budget constraints:
    cfh =(1/cfhs)*((1+dh)-chhs*(1+chh)-(phi_sh/2)*(1+2*shh)-(phi_sf/2)*(1+2*sfh)-(tau_c/2)*(1+2*cfh))-1;
    cff =(1/cffs)*((1+df)-chfs*(1+chf)-(tau_c/2)*(1+2*chf))-1;
end;

%----------------------------------------------------------------
% 4. Computation
%----------------------------------------------------------------

initval;
    sff=1;
    sh=1;
    e_sh=0;
    e_sf=0; 
    e_b=0; 
end;
check;
steady;


shocks;
var e_sh; stderr 0.1;
var e_sf; stderr 0.1;
end;

stoch_simul(irf=24);




